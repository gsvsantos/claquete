import{c as G}from"./chunk-Z4HXWR2W.js";import{a as K}from"./chunk-BWB4ON4Z.js";import"./chunk-VGYVBEAV.js";import"./chunk-WHWL7PKT.js";import{Aa as x,Ab as J,Ca as h,Da as m,H as M,J as _,K as P,Ka as y,La as S,Qa as j,Ra as d,Sa as u,Y as s,bb as V,ca as b,cb as k,e as w,h as c,ha as E,i as q,ia as O,mb as R,o as F,oa as A,qa as I,ra as g,sa as f,ta as v,ua as l,ub as N,va as r,vb as z,w as $,wa as o,xa as T,xb as L,y as D,yb as W,zb as H}from"./chunk-25JCDCCY.js";function Q(i){let t=i.page,e=i.total_pages,{start:a,end:n}=X(t,e,7),p=Y(a,n);return{actualPage:t,totalPages:e,pages:p}}function X(i,t,e){let a=Math.max(1,Math.min(e,t)),n=Math.floor(a/2),p=Math.max(1,i-n),B=Math.min(t,p+a-1);return p=Math.max(1,B-a+1),{start:p,end:B}}function Y(i,t){return Array.from({length:t-i+1},(e,a)=>i+a)}function te(i,t){if(i&1){let e=x();r(0,"gs-buttons",2),h("click",function(){let n=_(e).$implicit,p=m();return P(p.requiredPage.emit(n))}),o()}if(i&2){let e=t.$implicit,a=m();l("buttonType",a.buttonType.Default)("text",e.toString())("variant",(a.availablePages==null?null:a.availablePages.actualPage)===e?a.variantType.Solid:a.variantType.Outline)}}var C=class i{availablePages;requiredPage=new O;buttonType=W;targetType=H;variantType=J;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["clqt-pagination-buttons"]],inputs:{availablePages:"availablePages"},outputs:{requiredPage:"requiredPage"},decls:3,vars:0,consts:[[1,"buttons"],["color","#41C8D5","textColor","#FFFFFF","hoverColor","#12AFC0","activeColor","#29BBCA",1,"btn-page",3,"buttonType","text","variant"],["color","#41C8D5","textColor","#FFFFFF","hoverColor","#12AFC0","activeColor","#29BBCA",1,"btn-page",3,"click","buttonType","text","variant"]],template:function(e,a){e&1&&(r(0,"section",0),f(1,te,1,3,"gs-buttons",1,g),o()),e&2&&(s(),v(a.availablePages==null?null:a.availablePages.pages))},dependencies:[L],styles:[".buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px}"]})};var ie=i=>({text:i});function ae(i,t){if(i&1&&T(0,"clqt-media-card",6),i&2){let e=t.$implicit;l("media",e)}}function ne(i,t){if(i&1&&T(0,"clqt-media-card",6),i&2){let e=t.$implicit;l("media",e)}}function re(i,t){if(i&1){let e=x();r(0,"clqt-pagination-buttons",10),h("requiredPage",function(n){_(e);let p=m(2);return P(p.pageSubject$.next(n))}),o()}i&2&&l("availablePages",t)}function oe(i,t){if(i&1&&(r(0,"div",2)(1,"h1"),y(2),d(3,"async"),d(4,"titlecase"),o(),r(5,"div",3)(6,"h3",4),y(7),o(),r(8,"div",5),f(9,ae,1,1,"clqt-media-card",6,g),d(11,"async"),o()(),r(12,"div",7)(13,"h3",4),y(14),o(),r(15,"div",5),f(16,ne,1,1,"clqt-media-card",6,g),d(18,"async"),o()(),r(19,"div",8),A(20,re,1,1,"clqt-pagination-buttons",9),d(21,"async"),o()()),i&2){let e,a=t.$implicit,n=m();s(2),S(u(4,6,a("searched",j(14,ie,u(3,4,n.queryParam$))))),s(5),S(a("section-title.movies")),s(2),v(u(11,8,n.moviesSelected$)),s(5),S(a("section-title.tv-shows")),s(2),v(u(18,10,n.tvShowsSelected$)),s(4),I((e=u(21,12,n.availablePages$))?20:-1,e)}}var U=class i{route=M(R);tMDBService=M(G);pageSubject$=new w(1);queryParam$=this.route.queryParamMap.pipe(F(t=>t.has("query")),c(t=>t.get("query")));mediasSelected$=q([this.pageSubject$,this.queryParam$]).pipe(D(([t,e])=>this.tMDBService.searchMulti(e,{page:t}).pipe(c(a=>this.tMDBService.mapMediasSearchResult(a)))),$({bufferSize:1,refCount:!0}));moviesSelected$=this.mediasSelected$.pipe(c(t=>t.results.filter(e=>e.media_type==="movie")));tvShowsSelected$=this.mediasSelected$.pipe(c(t=>t.results.filter(e=>e.media_type==="tv")));availablePages$=this.mediasSelected$.pipe(c(Q));static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["clqt-search-page"]],decls:2,vars:1,consts:[[1,"main"],["class","content",4,"transloco","translocoPrefix"],[1,"content"],[1,"movies"],[1,"section-title"],[1,"medias-list"],[3,"media"],[1,"tvShows"],[1,"availablePages"],[3,"availablePages"],[3,"requiredPage","availablePages"]],template:function(e,a){e&1&&(r(0,"div",0),E(1,oe,22,16,"div",1),o()),e&2&&(s(),l("translocoPrefix","search-page"))},dependencies:[K,z,N,C,V,k],styles:[".main[_ngcontent-%COMP%]{min-height:100vh;padding:16px}.content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;max-width:1560px;margin:0 auto;background:linear-gradient(160deg,#021018,#08324f)}.medias-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:20px;list-style:none;padding:0;margin:0 0 16px}@media (max-width: 1800px){.medias-list[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr)}}@media (max-width: 1600px){.medias-list[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}@media (max-width: 1280px){.medias-list[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}@media (max-width: 982px){.medias-list[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 768px){.medias-list[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);justify-items:center}}@media (max-width: 482px){.medias-list[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr);justify-items:center}}"]})};export{U as SearchPage};
